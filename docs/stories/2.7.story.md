# Story 2.7: Homepage Pricing Preview Section

## Status

Done

## Story

**As a** visitor,
**I want** to see a preview of pricing on the homepage,
**so that** I know the agency is transparent and can quickly assess affordability.

## Acceptance Criteria

1. Section headline (e.g., "Transparent Pricing")
2. Brief text emphasizing no hidden costs
3. Starting prices or package teasers for Amazon and Etsy
4. Prominent CTA to full Pricing page
5. Mention of bundle discount as incentive
6. Responsive layout

## Tasks / Subtasks

- [x] Task 1: Create PricingPreviewSection component (AC: 1, 2, 6)
  - [x] Create new file `components/sections/pricing-preview.tsx`
  - [x] Define `PricingPreviewSectionProps` interface with typed props for headline, optional subheadline
  - [x] Add JSDoc documentation for component
  - [x] Implement section headline with proper typography (`text-3xl md:text-4xl font-bold`)
  - [x] Add brief introductory text emphasizing transparency and no hidden costs
  - [x] Use Container component for consistent layout
  - [x] Apply section padding `py-16 md:py-24`
  - [x] Use `bg-muted/30` background for visual distinction (alternating from TestimonialsSection)

- [x] Task 2: Create PricingPreviewCard component (AC: 3, 5)
  - [x] Create new file `components/cards/pricing-preview-card.tsx`
  - [x] Define `PricingPreviewCardProps` interface with platform, title, startingPrice, features (3-4 highlights)
  - [x] Add JSDoc documentation for component
  - [x] Implement platform header (Amazon or Etsy) with appropriate styling
  - [x] Display "Starting at" price with currency formatting
  - [x] Show 3-4 feature highlights as bullet list
  - [x] Use shadcn/ui Card component for consistent styling
  - [x] Add platform-specific accent colors (similar to existing platform badges)

- [x] Task 3: Implement responsive card layout (AC: 3, 6)
  - [x] Use CSS Grid or Flexbox for pricing card layout
  - [x] Desktop: Cards side by side (`md:grid-cols-2`)
  - [x] Mobile: Cards stack in single column (`grid-cols-1`)
  - [x] Consistent spacing: `gap-6 lg:gap-8`
  - [x] Center-align content on all breakpoints

- [x] Task 4: Add bundle discount highlight (AC: 5)
  - [x] Create a bundle highlight element/badge within the section
  - [x] Use accent color (orange) for visual emphasis
  - [x] Text: "Bundle & Save: Get both Amazon + Etsy services at a discount"
  - [x] Position below pricing cards or as a banner above/between

- [x] Task 5: Add CTA button to full Pricing page (AC: 4)
  - [x] Add prominent Button component linked to `/pricing`
  - [x] Use primary variant for visual prominence
  - [x] Text: "View Full Pricing" or "See All Packages"
  - [x] Center-align CTA below cards and bundle highlight

- [x] Task 6: Define placeholder pricing data (AC: 3, 5)
  - [x] Amazon pricing teaser: Starting at $XXX/month with 3-4 key features
  - [x] Etsy pricing teaser: Starting at $XXX/month with 3-4 key features
  - [x] Store pricing data as typed array/objects within component or as props

- [x] Task 7: Integrate PricingPreviewSection into homepage (AC: all)
  - [x] Import PricingPreviewSection component in `app/page.tsx`
  - [x] Add section after TestimonialsSection component
  - [x] Pass appropriate props for headline
  - [x] Verify section renders correctly in page flow

- [x] Task 8: Write unit tests for components (AC: all)
  - [x] Create `tests/components/sections/pricing-preview.test.tsx`
  - [x] Create `tests/components/cards/pricing-preview-card.test.tsx`
  - [x] Test: PricingPreviewSection renders section headline
  - [x] Test: PricingPreviewSection renders both pricing preview cards
  - [x] Test: PricingPreviewSection renders bundle discount message
  - [x] Test: PricingPreviewSection renders CTA button with correct link
  - [x] Test: PricingPreviewCard renders platform name
  - [x] Test: PricingPreviewCard renders starting price
  - [x] Test: PricingPreviewCard renders feature highlights

- [x] Task 9: Final verification (AC: all)
  - [x] Run `npm run lint` - ensure no errors
  - [x] Run `npm run build` - ensure successful build
  - [x] Run `npm run test:run` - ensure all tests pass
  - [x] Manually verify responsive behavior at mobile, tablet, desktop
  - [x] Verify visual distinction from adjacent sections

## Dev Notes

### Previous Story Insights (Story 2.6)
[Source: docs/stories/2.6.story.md#dev-agent-record]

- TestimonialsSection uses default background (no bg class) for visual alternation
- TestimonialCard follows pattern with quote, client info, and platform badge
- Responsive grid: single column mobile, 2 columns tablet/desktop (md:grid-cols-2)
- Container component at `components/layout/container.tsx` provides consistent max-width
- 134 tests passing with Vitest + React Testing Library
- Grid pattern: `grid grid-cols-1 md:grid-cols-2 gap-6 lg:gap-8`
- Platform badges styled with orange color variants
- For PricingPreviewSection, use `bg-muted/30` background to alternate from Testimonials

### Component File Locations
[Source: docs/architecture/unified-project-structure.md]

```
components/
├── sections/              # Page section components
│   ├── hero.tsx           # EXISTS - Hero section
│   ├── services-overview.tsx  # EXISTS - Services overview
│   ├── how-it-works.tsx   # EXISTS - How it works (Story 2.3)
│   ├── why-choose-us.tsx  # EXISTS - Why choose us (Story 2.4)
│   ├── results-gallery.tsx  # EXISTS - Results gallery (Story 2.5)
│   ├── testimonials.tsx   # EXISTS - Testimonials (Story 2.6)
│   ├── pricing-preview.tsx  # NEW - Create here
│   └── ...
├── cards/                 # Card components
│   ├── platform-card.tsx  # EXISTS - Platform cards
│   ├── step-card.tsx      # EXISTS - Step cards (Story 2.3)
│   ├── differentiator-card.tsx  # EXISTS - Differentiator cards (Story 2.4)
│   ├── result-card.tsx    # EXISTS - Result cards (Story 2.5)
│   ├── testimonial-card.tsx  # EXISTS - Testimonial cards (Story 2.6)
│   ├── pricing-preview-card.tsx  # NEW - Create here
│   └── ...
```

### PricingPreviewCard Component Specification
[Source: docs/architecture/frontend-architecture.md, docs/architecture/components.md]

**Architecture Definition (from components.md):**
```
PricingCard
- Responsibility: Pricing package display with features list
- Key Interfaces: PricingPackage type
- Dependencies: Card, Button, CheckIcon
- Technology Stack: React, Tailwind
```

**Suggested Props Interface:**
```typescript
/**
 * A pricing package preview for the homepage.
 */
interface PricingPreview {
  /** Unique identifier */
  id: string;
  /** Platform name (Amazon or Etsy) */
  platform: 'amazon' | 'etsy';
  /** Package display title */
  title: string;
  /** Starting price (monthly) */
  startingPrice: number;
  /** 3-4 key feature highlights */
  features: string[];
}

/**
 * Props for the PricingPreviewCard component.
 */
interface PricingPreviewCardProps {
  /** Platform name */
  platform: 'amazon' | 'etsy';
  /** Package title */
  title: string;
  /** Starting price in dollars */
  startingPrice: number;
  /** Feature highlights to display */
  features: string[];
}
```

### PricingPreviewSection Component Specification
[Source: docs/architecture/frontend-architecture.md, extrapolated from existing section patterns]

**Props Interface:**
```typescript
/**
 * Props for the PricingPreviewSection component.
 */
interface PricingPreviewSectionProps {
  /** Section headline text */
  headline: string;
  /** Optional subheadline text */
  subheadline?: string;
  /** Array of pricing previews to display (defaults to Amazon and Etsy) */
  pricingPreviews?: PricingPreview[];
  /** Bundle discount text */
  bundleText?: string;
}
```

### Existing UI Components to Use
[Source: docs/architecture/frontend-architecture.md, current codebase]

1. **Container** (`components/layout/container.tsx`)
   - Use for consistent max-width and padding
   - Default size is "xl"

2. **Card** (`components/ui/card.tsx`) - EXISTS
   - Already installed via shadcn/ui
   - Use CardHeader/CardContent structure

3. **Button** (`components/ui/button.tsx`) - EXISTS
   - Use primary variant for main CTA
   - Wrap with Link component for routing

4. **cn()** utility (`lib/utils.ts`)
   - For className merging with Tailwind

### Visual Distinction Approach (AC: Background)
[Source: Extrapolated from existing section patterns]

Current section backgrounds (in order on homepage):
- Hero: Default (no explicit bg)
- ServicesOverview: Default
- HowItWorks: `bg-muted/30`
- WhyChooseUs: `bg-primary/5`
- ResultsGallery: `bg-muted/30`
- TestimonialsSection: Default (no bg)
- **PricingPreviewSection**: **Suggest `bg-muted/30`** to create alternating rhythm

### Pricing Content (Required by AC)
[Source: docs/prd.md#Story-2.7]

Based on AC requirement for starting prices and package teasers:

```typescript
const defaultPricingPreviews: PricingPreview[] = [
  {
    id: 'amazon-preview',
    platform: 'amazon',
    title: 'Amazon Services',
    startingPrice: 499,
    features: [
      'Account setup & optimization',
      'Product listing optimization',
      'PPC advertising management',
      'Monthly performance reports',
    ],
  },
  {
    id: 'etsy-preview',
    platform: 'etsy',
    title: 'Etsy Services',
    startingPrice: 399,
    features: [
      'Shop setup & configuration',
      'SEO & search optimization',
      'Listing optimization',
      'Marketing strategy',
    ],
  },
];
```

**Section Headline:** "Transparent Pricing"
**Subheadline:** "No hidden costs. No surprises. Just honest, results-focused pricing."
**Bundle Text:** "Bundle & Save: Get both Amazon + Etsy services at a discount"

### Price Formatting
[Source: Best practices]

```typescript
// Format price as currency
const formatPrice = (price: number): string => {
  return new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD',
    minimumFractionDigits: 0,
    maximumFractionDigits: 0,
  }).format(price);
};
```

### CTA Button Pattern
[Source: Existing components in codebase]

```typescript
import Link from 'next/link';
import { Button } from '@/components/ui/button';

// In the section component:
<Button asChild size="lg">
  <Link href="/pricing">View Full Pricing</Link>
</Button>
```

### Accessibility Requirements
[Source: docs/prd.md, docs/architecture/coding-standards.md]

- WCAG 2.1 AA compliance required
- Proper heading hierarchy (h2 for section headline)
- Use semantic HTML for feature lists (`<ul>`, `<li>`)
- Sufficient color contrast (4.5:1 for text)
- Button should have accessible name
- Prices should be properly formatted and announced

### Coding Standards Checklist
[Source: docs/architecture/coding-standards.md]

- [ ] Type Everything: All functions with explicit TypeScript types
- [ ] Component Props: Typed props interface with JSDoc
- [ ] JSDoc Documentation: Component, props, and any helpers
- [ ] Accessibility: Proper semantic HTML, ARIA where needed
- [ ] No Console Logs: Remove any debugging statements

## Testing

[Source: docs/architecture/testing-strategy.md]

### Test Location
- `tests/components/sections/pricing-preview.test.tsx`
- `tests/components/cards/pricing-preview-card.test.tsx`

### Testing Framework
- Vitest + React Testing Library
- Import from `@testing-library/react`
- Use `describe`, `it`, `expect` from `vitest`

### Required Tests for PricingPreviewSection

```typescript
import { render, screen } from '@testing-library/react';
import { describe, it, expect } from 'vitest';
import { PricingPreviewSection } from '@/components/sections/pricing-preview';

describe('PricingPreviewSection', () => {
  it('renders the section headline', () => {
    render(<PricingPreviewSection headline="Transparent Pricing" />);
    expect(screen.getByRole('heading', { level: 2 })).toHaveTextContent('Transparent Pricing');
  });

  it('renders optional subheadline when provided', () => {
    render(
      <PricingPreviewSection
        headline="Transparent Pricing"
        subheadline="No hidden costs."
      />
    );
    expect(screen.getByText(/No hidden costs/i)).toBeInTheDocument();
  });

  it('renders both pricing preview cards', () => {
    render(<PricingPreviewSection headline="Transparent Pricing" />);
    expect(screen.getByText(/Amazon Services/i)).toBeInTheDocument();
    expect(screen.getByText(/Etsy Services/i)).toBeInTheDocument();
  });

  it('renders the bundle discount message', () => {
    render(<PricingPreviewSection headline="Transparent Pricing" />);
    expect(screen.getByText(/Bundle & Save/i)).toBeInTheDocument();
  });

  it('renders the CTA button with link to pricing page', () => {
    render(<PricingPreviewSection headline="Transparent Pricing" />);
    const link = screen.getByRole('link', { name: /View Full Pricing/i });
    expect(link).toHaveAttribute('href', '/pricing');
  });
});
```

### Required Tests for PricingPreviewCard

```typescript
import { render, screen } from '@testing-library/react';
import { describe, it, expect } from 'vitest';
import { PricingPreviewCard } from '@/components/cards/pricing-preview-card';

const defaultProps = {
  platform: 'amazon' as const,
  title: 'Amazon Services',
  startingPrice: 499,
  features: ['Feature 1', 'Feature 2', 'Feature 3'],
};

describe('PricingPreviewCard', () => {
  it('renders the platform title', () => {
    render(<PricingPreviewCard {...defaultProps} />);
    expect(screen.getByText(/Amazon Services/i)).toBeInTheDocument();
  });

  it('renders the starting price', () => {
    render(<PricingPreviewCard {...defaultProps} />);
    expect(screen.getByText(/\$499/i)).toBeInTheDocument();
  });

  it('renders "Starting at" label', () => {
    render(<PricingPreviewCard {...defaultProps} />);
    expect(screen.getByText(/Starting at/i)).toBeInTheDocument();
  });

  it('renders all feature highlights', () => {
    render(<PricingPreviewCard {...defaultProps} />);
    expect(screen.getByText('Feature 1')).toBeInTheDocument();
    expect(screen.getByText('Feature 2')).toBeInTheDocument();
    expect(screen.getByText('Feature 3')).toBeInTheDocument();
  });

  it('renders etsy platform correctly', () => {
    render(
      <PricingPreviewCard
        {...defaultProps}
        platform="etsy"
        title="Etsy Services"
        startingPrice={399}
      />
    );
    expect(screen.getByText(/Etsy Services/i)).toBeInTheDocument();
    expect(screen.getByText(/\$399/i)).toBeInTheDocument();
  });
});
```

### Test Coverage Goals
- All acceptance criteria covered by at least one test
- Component renders correctly with all required props
- Pricing data displays correctly (platform, price, features)
- CTA button links to correct page
- Bundle discount message renders
- Responsive layout verified via visual testing (manual)

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-05 | 1.0 | Initial story draft | SM Agent (Bob) |

---

## Dev Agent Record

### Agent Model Used
Claude Opus 4.5 (claude-opus-4-5-20251101)

### File List

| File | Action | Description |
|------|--------|-------------|
| components/cards/pricing-preview-card.tsx | Created | PricingPreviewCard component with platform badge, price, features |
| components/sections/pricing-preview.tsx | Created | PricingPreviewSection with cards grid, bundle highlight, CTA |
| app/page.tsx | Modified | Added PricingPreviewSection after TestimonialsSection |
| tests/components/cards/pricing-preview-card.test.tsx | Created | 8 unit tests for PricingPreviewCard |
| tests/components/sections/pricing-preview.test.tsx | Created | 11 unit tests for PricingPreviewSection |

### Debug Log References
None - implementation completed without issues.

### Completion Notes
- All 9 tasks completed successfully
- 153 tests passing (19 new tests added for this story)
- Lint passes with no errors
- Build succeeds
- Responsive layout: single column mobile, 2-column md+ with max-w-4xl constraint
- Bundle highlight uses orange accent colors matching existing platform badges
- Price formatting uses Intl.NumberFormat for proper currency display
- Check icons from lucide-react for feature list items

---

## QA Results

### Review Date: 2025-12-05

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

Excellent implementation that follows established patterns. The PricingPreviewSection and PricingPreviewCard components are well-structured, properly typed, and thoroughly documented with JSDoc. The code mirrors the structure of adjacent sections (TestimonialsSection) while adding appropriate pricing-specific features like the bundle highlight and formatted prices.

Key quality indicators:
- Clean TypeScript with explicit types and interfaces
- Comprehensive JSDoc documentation with examples
- Proper use of shadcn/ui Card component
- Semantic HTML (section, h2, ul/li for features)
- Accessibility considerations (aria-hidden on decorative elements)
- Price formatting using Intl.NumberFormat

### Refactoring Performed

None required. Implementation is clean and follows existing codebase patterns.

### Compliance Check

- Coding Standards: ✓ TypeScript typed, JSDoc present, no console.log, no `any`
- Project Structure: ✓ Components in correct locations (sections/, cards/)
- Testing Strategy: ✓ Unit tests with Vitest + React Testing Library (19 tests)
- All ACs Met: ✓ All 6 acceptance criteria fully implemented and tested

### Improvements Checklist

All items addressed by developer - no outstanding issues.

- [x] PricingPreviewSection component created with proper props interface
- [x] PricingPreviewCard component with platform styling
- [x] Responsive grid layout (1-col mobile, 2-col md+)
- [x] Bundle discount highlight with orange accent
- [x] CTA button linking to /pricing
- [x] Price formatting with currency formatting
- [x] Full test coverage for both components
- [x] Lint passes with no errors
- [x] Build succeeds
- [x] All 153 tests passing

### Security Review

No security concerns. Component is purely presentational with static content. No user input handling, no API calls, no sensitive data.

### Performance Considerations

No performance concerns. Lightweight stateless component with minimal DOM complexity. Static rendering compatible (verified by successful Next.js build).

### Files Modified During Review

None - no refactoring was needed.

### Gate Status

Gate: PASS → docs/qa/gates/2.7-homepage-pricing-preview-section.yml

### Recommended Status

✓ Ready for Done

Story implementation is complete with all acceptance criteria met, comprehensive test coverage, and adherence to project standards.
