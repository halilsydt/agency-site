# Story 2.4: Homepage Why Choose Us Section

## Status

Done

## Story

**As a** visitor,
**I want** to understand what differentiates this agency,
**so that** I can trust they're different from hype-driven competitors.

## Acceptance Criteria

1. Section headline (e.g., "Why Choose Us")
2. 3-4 differentiators with icons
3. Key points: Honest approach, Real results, Transparent pricing, Platform expertise
4. Brief supporting text for each point
5. Visually distinct from other sections
6. Responsive layout

## Tasks / Subtasks

- [x] Task 1: Create WhyChooseUs section component (AC: 1, 5, 6)
  - [x] Create new file `components/sections/why-choose-us.tsx`
  - [x] Define `WhyChooseUsProps` interface with typed props for headline, optional subheadline
  - [x] Add JSDoc documentation for component
  - [x] Implement section headline with proper typography (`text-3xl md:text-4xl font-bold`)
  - [x] Use Container component for consistent layout
  - [x] Apply section padding `py-16 md:py-24`
  - [x] Make section visually distinct (consider different background color like `bg-primary/5` or subtle pattern)

- [x] Task 2: Create DifferentiatorCard component (AC: 2, 3, 4)
  - [x] Create new file `components/cards/differentiator-card.tsx`
  - [x] Define `DifferentiatorCardProps` interface with icon, title, description
  - [x] Add JSDoc documentation for component
  - [x] Implement icon display area (emoji placeholder initially, can use Lucide icons)
  - [x] Add title with `text-xl font-semibold`
  - [x] Add description with `text-muted-foreground`
  - [x] Center content alignment

- [x] Task 3: Implement responsive grid layout (AC: 6)
  - [x] Use CSS Grid for differentiator card layout
  - [x] Desktop: Cards arranged in row (`md:grid-cols-2 lg:grid-cols-4`)
  - [x] Mobile: Cards stack in single column (`grid-cols-1`)
  - [x] Consistent spacing: `gap-6 lg:gap-8`
  - [x] Center-align content on all breakpoints

- [x] Task 4: Define differentiator content data (AC: 3, 4)
  - [x] Differentiator 1: "Honest Approach" - No hype, no empty promises. Just real strategies that work.
  - [x] Differentiator 2: "Real Results" - Track record of measurable growth for Amazon and Etsy sellers.
  - [x] Differentiator 3: "Transparent Pricing" - Clear pricing with no hidden fees or surprises.
  - [x] Differentiator 4: "Platform Expertise" - Deep specialization in both Amazon and Etsy ecosystems.
  - [x] Store differentiators as typed array within component or as props

- [x] Task 5: Integrate WhyChooseUs into homepage (AC: all)
  - [x] Import WhyChooseUs component in `app/page.tsx`
  - [x] Add section after HowItWorks component
  - [x] Pass appropriate props for headline
  - [x] Verify section renders correctly in page flow

- [x] Task 6: Write unit tests for components (AC: all)
  - [x] Create `tests/components/sections/why-choose-us.test.tsx`
  - [x] Create `tests/components/cards/differentiator-card.test.tsx`
  - [x] Test: WhyChooseUs renders section headline
  - [x] Test: WhyChooseUs renders all differentiator cards (4 cards)
  - [x] Test: DifferentiatorCard renders icon
  - [x] Test: DifferentiatorCard renders title
  - [x] Test: DifferentiatorCard renders description

- [x] Task 7: Final verification (AC: all)
  - [x] Run `npm run lint` - ensure no errors
  - [x] Run `npm run build` - ensure successful build
  - [x] Run `npm run test:run` - ensure all tests pass
  - [ ] Manually verify responsive behavior at mobile, tablet, desktop
  - [ ] Verify visual distinction from adjacent sections

## Dev Notes

### Previous Story Insights (Story 2.3)
[Source: docs/stories/2.3.story.md#dev-agent-record]

- HowItWorks section uses subtle `bg-muted/30` background to differentiate from adjacent sections
- StepCard component follows pattern with numbered badge, optional icon, title, and description
- Visual connectors implemented with CSS pseudo-elements (horizontal on desktop, vertical on mobile)
- Responsive grid: single column mobile, 3-column desktop
- Container component at `components/layout/container.tsx` provides consistent max-width
- 97 tests passing with Vitest + React Testing Library
- Grid pattern: `grid grid-cols-1 md:grid-cols-3 gap-8`

### Component File Locations
[Source: docs/architecture/unified-project-structure.md]

```
components/
â”œâ”€â”€ sections/              # Page section components
â”‚   â”œâ”€â”€ hero.tsx           # EXISTS - Hero section
â”‚   â”œâ”€â”€ services-overview.tsx  # EXISTS - Services overview
â”‚   â”œâ”€â”€ how-it-works.tsx   # EXISTS - How it works (Story 2.3)
â”‚   â”œâ”€â”€ why-choose-us.tsx  # NEW - Create here
â”‚   â””â”€â”€ ...
â”œâ”€â”€ cards/                 # Card components
â”‚   â”œâ”€â”€ platform-card.tsx  # EXISTS - Platform cards
â”‚   â”œâ”€â”€ step-card.tsx      # EXISTS - Step cards (Story 2.3)
â”‚   â”œâ”€â”€ differentiator-card.tsx  # NEW - Create here
â”‚   â””â”€â”€ ...
```

### WhyChooseUs Component Specification
[Source: docs/architecture/frontend-architecture.md, docs/architecture/components.md]

The WhyChooseUs component displays a section highlighting the agency's differentiators.

**Architecture Definition:**
No specific entry in components.md for WhyChooseUs, but follows the pattern of other section components.

**Suggested Props Interface:**
```typescript
/**
 * A single differentiator point.
 */
interface Differentiator {
  /** Icon identifier (emoji or Lucide icon name) */
  icon: string;
  /** Differentiator title */
  title: string;
  /** Brief supporting description */
  description: string;
}

/**
 * Props for the WhyChooseUs component.
 */
interface WhyChooseUsProps {
  /** Section headline text */
  headline: string;
  /** Optional subheadline text */
  subheadline?: string;
  /** Array of differentiators to display (defaults to 4 core values) */
  differentiators?: Differentiator[];
}
```

### DifferentiatorCard Component Specification
[Source: docs/architecture/frontend-architecture.md, extrapolated from StepCard pattern]

**Props Interface:**
```typescript
/**
 * Props for the DifferentiatorCard component.
 */
interface DifferentiatorCardProps {
  /** Icon for visual enhancement (emoji or icon name) */
  icon: string;
  /** Differentiator title */
  title: string;
  /** Brief description of this differentiator */
  description: string;
}
```

### Existing UI Components to Use
[Source: docs/architecture/frontend-architecture.md, current codebase]

1. **Container** (`components/layout/container.tsx`)
   - Use for consistent max-width and padding
   - Default size is "xl"

2. **Card** (`components/ui/card.tsx`) - EXISTS
   - Already installed via shadcn/ui
   - Can use for differentiator cards if desired, or create custom styled divs

3. **cn()** utility (`lib/utils.ts`)
   - For className merging with Tailwind

### Responsive Design Patterns
[Source: docs/architecture/tech-stack.md, previous stories]

- Mobile-first approach with breakpoints: `sm:`, `md:`, `lg:`, `xl:`
- Section padding: `py-16 md:py-24` for major sections
- Grid layout for 4 cards: `grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8`

### Visual Distinction Approach (AC: 5)
[Source: No specific architecture guidance - extrapolated from existing patterns]

To make the section visually distinct from adjacent sections:
- Option 1: Use a subtle background color like `bg-primary/5` (light primary tint)
- Option 2: Use `bg-muted/30` (similar to HowItWorks but consider alternating)
- Option 3: Use a different background entirely, such as `bg-accent/5`
- Note: HowItWorks uses `bg-muted/30`, so consider using `bg-primary/5` for visual contrast

### Differentiator Content (Required by AC)
[Source: docs/prd/epic-details.md#Story-2.4]

Based on AC requirement for specific key points:

```typescript
const defaultDifferentiators: Differentiator[] = [
  {
    icon: 'ðŸ¤', // or use Lucide icon: 'handshake'
    title: 'Honest Approach',
    description: 'No hype, no empty promises. Just real strategies that work for your business.',
  },
  {
    icon: 'ðŸ“ˆ', // or use Lucide icon: 'trending-up'
    title: 'Real Results',
    description: 'Track record of measurable growth for Amazon and Etsy sellers.',
  },
  {
    icon: 'ðŸ’°', // or use Lucide icon: 'wallet'
    title: 'Transparent Pricing',
    description: 'Clear pricing with no hidden fees or surprises. Know exactly what you pay for.',
  },
  {
    icon: 'ðŸŽ¯', // or use Lucide icon: 'target'
    title: 'Platform Expertise',
    description: 'Deep specialization in both Amazon and Etsy ecosystems.',
  },
];
```

**Section Headline:** "Why Choose Us"

### Accessibility Requirements
[Source: docs/prd/epic-details.md, docs/architecture/coding-standards.md]

- WCAG 2.1 AA compliance required
- Proper heading hierarchy (h2 for section headline, h3 for differentiator titles)
- Icons should be decorative (not essential for understanding)
- Sufficient color contrast (4.5:1 for text)
- Card content should be readable by screen readers

### Coding Standards Checklist
[Source: docs/architecture/coding-standards.md]

- [ ] Type Everything: All functions with explicit TypeScript types
- [ ] Component Props: Typed props interface with JSDoc
- [ ] JSDoc Documentation: Component, props, and any helpers
- [ ] Accessibility: Proper heading hierarchy, semantic HTML
- [ ] No Console Logs: Remove any debugging statements

## Testing

[Source: docs/architecture/testing-strategy.md]

### Test Location
- `tests/components/sections/why-choose-us.test.tsx`
- `tests/components/cards/differentiator-card.test.tsx`

### Testing Framework
- Vitest + React Testing Library
- Import from `@testing-library/react`
- Use `describe`, `it`, `expect` from `vitest`

### Required Tests for WhyChooseUs

```typescript
import { render, screen } from '@testing-library/react';
import { describe, it, expect } from 'vitest';
import { WhyChooseUs } from '@/components/sections/why-choose-us';

describe('WhyChooseUs', () => {
  it('renders the section headline', () => {
    render(<WhyChooseUs headline="Why Choose Us" />);
    expect(screen.getByRole('heading', { level: 2 })).toHaveTextContent('Why Choose Us');
  });

  it('renders all differentiator cards', () => {
    render(<WhyChooseUs headline="Why Choose Us" />);
    expect(screen.getByText('Honest Approach')).toBeInTheDocument();
    expect(screen.getByText('Real Results')).toBeInTheDocument();
    expect(screen.getByText('Transparent Pricing')).toBeInTheDocument();
    expect(screen.getByText('Platform Expertise')).toBeInTheDocument();
  });

  it('renders differentiator descriptions', () => {
    render(<WhyChooseUs headline="Why Choose Us" />);
    expect(screen.getByText(/no hype, no empty promises/i)).toBeInTheDocument();
  });

  it('renders differentiator icons', () => {
    render(<WhyChooseUs headline="Why Choose Us" />);
    // Test for emoji icons or aria-hidden icon elements
    expect(screen.getByText('ðŸ¤')).toBeInTheDocument();
  });
});
```

### Required Tests for DifferentiatorCard

```typescript
import { render, screen } from '@testing-library/react';
import { describe, it, expect } from 'vitest';
import { DifferentiatorCard } from '@/components/cards/differentiator-card';

const defaultProps = {
  icon: 'ðŸ¤',
  title: 'Honest Approach',
  description: 'No hype, no empty promises.',
};

describe('DifferentiatorCard', () => {
  it('renders the icon', () => {
    render(<DifferentiatorCard {...defaultProps} />);
    expect(screen.getByText('ðŸ¤')).toBeInTheDocument();
  });

  it('renders the title', () => {
    render(<DifferentiatorCard {...defaultProps} />);
    expect(screen.getByText('Honest Approach')).toBeInTheDocument();
  });

  it('renders the description', () => {
    render(<DifferentiatorCard {...defaultProps} />);
    expect(screen.getByText(/no hype, no empty promises/i)).toBeInTheDocument();
  });
});
```

### Test Coverage Goals
- All acceptance criteria covered by at least one test
- Component renders correctly with all required props
- Differentiator icons, titles, and descriptions render correctly
- Responsive layout verified via visual testing (manual)

## Dev Agent Record

### Agent Model Used
Claude Opus 4.5 (claude-opus-4-5-20251101)

### File List
| File | Action |
|------|--------|
| components/sections/why-choose-us.tsx | Created |
| components/cards/differentiator-card.tsx | Created |
| app/page.tsx | Modified |
| tests/components/sections/why-choose-us.test.tsx | Created |
| tests/components/cards/differentiator-card.test.tsx | Created |

### Debug Log References
None - implementation completed without errors.

### Completion Notes
- WhyChooseUs section component created with `bg-primary/5` background for visual distinction from HowItWorks (`bg-muted/30`)
- DifferentiatorCard component follows StepCard pattern with centered icon, h3 title, and description
- Responsive grid: 1 column mobile, 2 columns tablet (md), 4 columns desktop (lg)
- All 4 differentiators implemented per AC: Honest Approach, Real Results, Transparent Pricing, Platform Expertise
- Section added to homepage after HowItWorks component
- 11 new tests added (7 for WhyChooseUs, 4 for DifferentiatorCard)
- Total test count: 108 tests passing
- Lint: No errors
- Build: Successful static export

## QA Results

### Review Date: 2025-12-05

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

Implementation is clean, well-structured, and follows established project patterns. The WhyChooseUs section component properly composes with DifferentiatorCard, mirroring the successful HowItWorks/StepCard pattern. TypeScript typing is complete with explicit return types and documented interfaces. JSDoc coverage is comprehensive with examples.

### Refactoring Performed

None required. Code quality meets all standards.

### Compliance Check

- Coding Standards: âœ“ All rules followed - typed props, JSDoc, no console.logs, explicit types
- Project Structure: âœ“ Files placed correctly in components/sections/ and components/cards/
- Testing Strategy: âœ“ Unit tests follow project patterns with Testing Library
- All ACs Met: âœ“ All 6 acceptance criteria implemented and verified

### Improvements Checklist

- [x] All components properly typed with TypeScript
- [x] JSDoc documentation complete with examples
- [x] Proper heading hierarchy (h2 for section, h3 for cards)
- [x] Icons marked as decorative with aria-hidden
- [x] Responsive grid layout implemented
- [x] Visual distinction with bg-primary/5 background
- [ ] Manual visual verification of responsive behavior (Task 7 pending)
- [ ] Manual verification of visual distinction from adjacent sections (Task 7 pending)

### Security Review

No security concerns. Component renders static content only with no user input handling, API calls, or authentication.

### Performance Considerations

No performance concerns. Simple static rendering with CSS Grid for layout. No state management or unnecessary re-renders.

### Files Modified During Review

None. No refactoring was needed.

### Gate Status

Gate: PASS â†’ docs/qa/gates/2.4-homepage-why-choose-us-section.yml

### Recommended Status

âœ“ Ready for Done (pending manual visual verification per Task 7)

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-05 | 1.0 | Initial story draft | SM Agent (Bob) |
| 2025-12-05 | 1.1 | Implementation complete | Dev Agent (James) |
