# Story 3.6: FAQ Page

## Status

Done

## Story

**As a** visitor,
**I want** to find answers to common questions,
**so that** I can resolve concerns without needing to contact the agency.

## Acceptance Criteria

1. Page headline
2. 5-10 FAQ items covering common questions
3. Accordion component for expandable answers
4. Categories if needed (General, Amazon, Etsy, Pricing)
5. CTA at bottom to contact if question not answered
6. Accessible accordion (keyboard operable, ARIA attributes)
7. SEO-friendly (questions visible to crawlers)

## Tasks / Subtasks

- [x] Task 1: Create FAQ content JSON file (AC: 2, 4)
  - [x] Create `content/faq.json` with 8-10 FAQ items
  - [x] Organize FAQs by category: General, Amazon, Etsy, Pricing
  - [x] Each FAQ item has: id, category, question, answer
  - [x] Ensure questions are visible in JSON for SEO crawlability

- [x] Task 2: Add FAQ types to lib/types.ts (AC: 2, 4)
  - [x] Add `FAQCategory` type: `"general" | "amazon" | "etsy" | "pricing"`
  - [x] Add `FAQ` interface with id, category, question, answer fields
  - [x] Add `FAQPageContent` interface for hero section content
  - [x] Add JSDoc documentation for all types

- [x] Task 3: Add FAQ content accessor to lib/content.ts (AC: 2, 4)
  - [x] Import `faq.json` content file
  - [x] Add `getFAQs()` function returning `FAQ[]`
  - [x] Add `getFAQsByCategory(category: FAQCategory)` function
  - [x] Add `getFAQPageContent()` function for hero content
  - [x] Add JSDoc documentation with examples

- [x] Task 4: Create FAQAccordion component (AC: 2, 3, 6)
  - [x] Create `components/sections/faq-accordion.tsx`
  - [x] Accept props: `faqs: FAQ[]`
  - [x] Use shadcn/ui Accordion component (already installed)
  - [x] Render all FAQ items with question as trigger, answer as content
  - [x] Ensure keyboard accessibility (built into Radix Accordion)
  - [x] Add JSDoc documentation

- [x] Task 5: Create CategoryFilter component (AC: 4)
  - [x] Create `components/sections/faq-category-filter.tsx`
  - [x] Accept props: `categories: FAQCategory[]`, `activeCategory: FAQCategory | "all"`, `onCategoryChange: (category) => void`
  - [x] Render filter buttons for "All" and each category
  - [x] Use Button component with variant for active/inactive state
  - [x] Ensure keyboard accessible
  - [x] Add JSDoc documentation

- [x] Task 6: Create FAQ page (AC: 1, 2, 3, 4, 5, 6, 7)
  - [x] Create `app/faq/page.tsx`
  - [x] Add SEO metadata export (title, description, openGraph)
  - [x] Add page headline from content
  - [x] Add CategoryFilter component for filtering by category
  - [x] Add FAQAccordion component with filtered FAQs
  - [x] Add CTA section at bottom linking to /contact
  - [x] Mark page as client component for filter interactivity
  - [x] Questions visible in HTML for SEO (server-rendered initially)
  - [x] Add JSDoc documentation

- [x] Task 7: Write component tests (AC: all)
  - [x] Create `tests/components/sections/faq-accordion.test.tsx`
    - Test: renders all FAQ questions
    - Test: shows answer when accordion item expanded
    - Test: accordion trigger has correct ARIA attributes
    - Test: keyboard navigation works (Tab, Enter/Space)
  - [x] Create `tests/components/sections/faq-category-filter.test.tsx`
    - Test: renders All button and category buttons
    - Test: active category button has different styling
    - Test: calls onCategoryChange when button clicked
  - [x] Create `tests/app/faq.test.tsx`
    - Test: renders page headline
    - Test: renders FAQ accordion
    - Test: renders category filter
    - Test: renders contact CTA at bottom
    - Test: filtering by category shows only matching FAQs
  - [x] Create `tests/lib/content-faq.test.ts`
    - Test: getFAQs returns all FAQs
    - Test: getFAQsByCategory returns filtered FAQs
    - Test: getFAQPageContent returns hero content

- [x] Task 8: Final verification (AC: all)
  - [x] Run `npm run lint` - ensure no errors
  - [x] Run `npm run build` - ensure successful build
  - [x] Run `npm run test:run` - ensure all tests pass
  - [ ] Manually verify on dev server:
    - [ ] FAQ page accessible at /faq
    - [ ] All FAQ questions visible on page load (SEO)
    - [ ] Accordion expands/collapses correctly
    - [ ] Category filter shows/hides appropriate FAQs
    - [ ] Keyboard navigation works (Tab through filters, Enter/Space to toggle accordion)
    - [ ] Contact CTA links to /contact page
    - [ ] Mobile layout works properly

## Dev Notes

### Previous Story Insights (Story 3.5)
[Source: docs/stories/3.5.story.md#dev-agent-record]

- 307 tests passing with Vitest + React Testing Library
- Content accessor pattern: `getXContent()` returns typed content from JSON
- Container component at `components/layout/container.tsx` for consistent max-width
- Accordion component already installed at `components/ui/accordion.tsx` (shadcn/ui + Radix)
- Button component supports `variant` prop for different styling
- jsdom polyfills may be needed for Radix components in tests
- Lint and build passing

### Component File Locations
[Source: docs/architecture/unified-project-structure.md]

```
content/
├── faq.json                      # NEW - FAQ content with categories

lib/
├── types.ts                      # MODIFY - Add FAQ, FAQCategory, FAQPageContent types
├── content.ts                    # MODIFY - Add getFAQs, getFAQsByCategory, getFAQPageContent

components/
├── ui/
│   └── accordion.tsx             # EXISTING - shadcn/ui accordion (Radix-based)
├── sections/
│   ├── faq-preview.tsx           # EXISTING - Reference for FAQItem interface pattern
│   ├── faq-accordion.tsx         # NEW - Full FAQ accordion component
│   └── faq-category-filter.tsx   # NEW - Category filter buttons

app/
├── faq/
│   └── page.tsx                  # NEW - Full FAQ page

tests/
├── components/sections/
│   ├── faq-accordion.test.tsx    # NEW
│   └── faq-category-filter.test.tsx  # NEW
├── app/
│   └── faq.test.tsx              # NEW
├── lib/
│   └── content-faq.test.ts       # NEW
```

### FAQ Content Structure
[Source: Pattern derived from content/about.json, components/sections/faq-preview.tsx]

**content/faq.json:**
```json
{
  "hero": {
    "headline": "Frequently Asked Questions",
    "subheadline": "Find answers to common questions about our services, pricing, and how we work with clients."
  },
  "faqs": [
    {
      "id": "faq-general-1",
      "category": "general",
      "question": "What platforms do you support?",
      "answer": "We specialize in Amazon and Etsy marketplace consulting. Whether you're selling on one platform or both, we can help optimize your presence and grow your sales."
    },
    {
      "id": "faq-general-2",
      "category": "general",
      "question": "How does the consultation process work?",
      "answer": "We start with a free discovery call to understand your business and goals. From there, we create a custom strategy tailored to your specific needs and provide ongoing support throughout implementation."
    },
    {
      "id": "faq-general-3",
      "category": "general",
      "question": "How long before I see results?",
      "answer": "Results vary depending on your starting point and goals, but most clients see measurable improvements within 30-60 days. We focus on sustainable growth, not quick fixes."
    },
    {
      "id": "faq-amazon-1",
      "category": "amazon",
      "question": "Can you help with Amazon PPC advertising?",
      "answer": "Yes! Our Amazon advertising services include campaign setup, keyword research, bid optimization, and ongoing performance monitoring to maximize your ROI."
    },
    {
      "id": "faq-amazon-2",
      "category": "amazon",
      "question": "Do you help with Amazon account suspensions?",
      "answer": "Absolutely. We have experience helping sellers navigate account health issues, including suspension appeals and compliance guidance to prevent future problems."
    },
    {
      "id": "faq-etsy-1",
      "category": "etsy",
      "question": "How can you improve my Etsy SEO?",
      "answer": "We optimize your shop and listings for Etsy's search algorithm, including title optimization, tag research, category selection, and attribute usage to improve visibility."
    },
    {
      "id": "faq-etsy-2",
      "category": "etsy",
      "question": "Do you offer Etsy shop setup assistance?",
      "answer": "Yes, we help new sellers set up their Etsy shops properly from the start, including shop branding, policy creation, and listing optimization best practices."
    },
    {
      "id": "faq-pricing-1",
      "category": "pricing",
      "question": "Are there any hidden fees?",
      "answer": "No hidden fees, ever. We believe in transparent pricing. What you see on our pricing page is what you pay. We'll always discuss any costs upfront before starting work."
    },
    {
      "id": "faq-pricing-2",
      "category": "pricing",
      "question": "Do you offer refunds or guarantees?",
      "answer": "We stand behind our work. While marketplace success depends on many factors, we offer a satisfaction guarantee on our consulting services. If you're not happy with our recommendations, we'll work with you to make it right."
    },
    {
      "id": "faq-pricing-3",
      "category": "pricing",
      "question": "Is there a discount for using both Amazon and Etsy services?",
      "answer": "Yes! We offer a bundle discount for clients who use our services for both platforms. Check our pricing page for details on our multi-platform packages."
    }
  ]
}
```

### Type Definitions
[Source: lib/types.ts patterns]

```typescript
/**
 * FAQ category for filtering.
 */
export type FAQCategory = "general" | "amazon" | "etsy" | "pricing";

/**
 * Represents a single FAQ item with category.
 */
export interface FAQ {
  /** Unique identifier for the FAQ */
  id: string;
  /** Category for filtering */
  category: FAQCategory;
  /** The question text */
  question: string;
  /** The answer text */
  answer: string;
}

/**
 * FAQ page hero content.
 */
export interface FAQPageContent {
  /** Hero section content */
  hero: { headline: string; subheadline: string };
  /** All FAQ items */
  faqs: FAQ[];
}
```

### Content Accessor Pattern
[Source: lib/content.ts]

```typescript
import faqData from "@/content/faq.json";
import type { FAQ, FAQCategory, FAQPageContent } from "./types";

/**
 * Retrieves all FAQ items.
 *
 * @returns Array of all FAQ items
 *
 * @example
 * ```ts
 * const faqs = getFAQs();
 * // Returns FAQ[]
 * ```
 */
export function getFAQs(): FAQ[] {
  return faqData.faqs as FAQ[];
}

/**
 * Retrieves FAQ items filtered by category.
 *
 * @param category - The category to filter by
 * @returns Array of FAQs matching the category
 *
 * @example
 * ```ts
 * const pricingFaqs = getFAQsByCategory("pricing");
 * // Returns FAQ[] for pricing category only
 * ```
 */
export function getFAQsByCategory(category: FAQCategory): FAQ[] {
  return getFAQs().filter((faq) => faq.category === category);
}

/**
 * Retrieves FAQ page content including hero and all FAQs.
 *
 * @returns Complete FAQ page content
 *
 * @example
 * ```ts
 * const { hero, faqs } = getFAQPageContent();
 * ```
 */
export function getFAQPageContent(): FAQPageContent {
  return faqData as FAQPageContent;
}
```

### FAQAccordion Component Pattern
[Source: components/sections/faq-preview.tsx, components/ui/accordion.tsx]

```typescript
// components/sections/faq-accordion.tsx
"use client";

import {
  Accordion,
  AccordionContent,
  AccordionItem,
  AccordionTrigger,
} from "@/components/ui/accordion";
import type { FAQ } from "@/lib/types";

/**
 * Props for the FAQAccordion component.
 */
export interface FAQAccordionProps {
  /** FAQ items to display */
  faqs: FAQ[];
}

/**
 * Displays FAQ items in an accessible accordion.
 * Uses Radix UI Accordion for built-in keyboard navigation and ARIA support.
 *
 * @param props - Component props
 * @param props.faqs - Array of FAQ items to display
 *
 * @example
 * ```tsx
 * <FAQAccordion faqs={allFaqs} />
 * ```
 */
export function FAQAccordion({ faqs }: FAQAccordionProps): React.ReactElement {
  return (
    <Accordion type="single" collapsible className="w-full">
      {faqs.map((faq) => (
        <AccordionItem key={faq.id} value={faq.id}>
          <AccordionTrigger className="text-left text-base font-medium">
            {faq.question}
          </AccordionTrigger>
          <AccordionContent className="text-muted-foreground">
            {faq.answer}
          </AccordionContent>
        </AccordionItem>
      ))}
    </Accordion>
  );
}
```

### CategoryFilter Component Pattern
[Source: components/ui/button.tsx patterns]

```typescript
// components/sections/faq-category-filter.tsx
"use client";

import { Button } from "@/components/ui/button";
import type { FAQCategory } from "@/lib/types";

/**
 * Category option including "all" for showing all FAQs.
 */
export type CategoryOption = FAQCategory | "all";

/**
 * Props for the FAQCategoryFilter component.
 */
export interface FAQCategoryFilterProps {
  /** Currently active category filter */
  activeCategory: CategoryOption;
  /** Callback when category changes */
  onCategoryChange: (category: CategoryOption) => void;
}

/**
 * Category labels for display.
 */
const categoryLabels: Record<CategoryOption, string> = {
  all: "All",
  general: "General",
  amazon: "Amazon",
  etsy: "Etsy",
  pricing: "Pricing",
};

/**
 * Filter buttons for FAQ categories.
 * Allows users to filter FAQs by category.
 *
 * @param props - Component props
 * @param props.activeCategory - Currently selected category
 * @param props.onCategoryChange - Handler for category selection
 *
 * @example
 * ```tsx
 * <FAQCategoryFilter
 *   activeCategory="all"
 *   onCategoryChange={(cat) => setActiveCategory(cat)}
 * />
 * ```
 */
export function FAQCategoryFilter({
  activeCategory,
  onCategoryChange,
}: FAQCategoryFilterProps): React.ReactElement {
  const categories: CategoryOption[] = ["all", "general", "amazon", "etsy", "pricing"];

  return (
    <div className="flex flex-wrap gap-2 justify-center">
      {categories.map((category) => (
        <Button
          key={category}
          variant={activeCategory === category ? "default" : "outline"}
          size="sm"
          onClick={() => onCategoryChange(category)}
        >
          {categoryLabels[category]}
        </Button>
      ))}
    </div>
  );
}
```

### FAQ Page Pattern
[Source: app/about/page.tsx, app/contact/page.tsx]

```typescript
// app/faq/page.tsx
"use client";

import { useState } from "react";
import type { Metadata } from "next";
import Link from "next/link";
import { getFAQPageContent } from "@/lib/content";
import { Container } from "@/components/layout/container";
import { Button } from "@/components/ui/button";
import { FAQAccordion } from "@/components/sections/faq-accordion";
import { FAQCategoryFilter, type CategoryOption } from "@/components/sections/faq-category-filter";

// Note: metadata must be in a separate file or use generateMetadata for client components
// See alternative pattern below

/**
 * FAQ page with filterable questions.
 * Displays all FAQs with category filtering and contact CTA.
 */
export default function FAQPage(): React.ReactElement {
  const { hero, faqs } = getFAQPageContent();
  const [activeCategory, setActiveCategory] = useState<CategoryOption>("all");

  const filteredFaqs = activeCategory === "all"
    ? faqs
    : faqs.filter((faq) => faq.category === activeCategory);

  return (
    <main>
      {/* Hero Section */}
      <section className="py-12 md:py-16 bg-muted/30">
        <Container>
          <div className="text-center max-w-3xl mx-auto">
            <h1 className="text-4xl md:text-5xl font-bold tracking-tight text-foreground">
              {hero.headline}
            </h1>
            <p className="mt-4 text-lg md:text-xl text-muted-foreground">
              {hero.subheadline}
            </p>
          </div>
        </Container>
      </section>

      {/* FAQ Section */}
      <section className="py-16 md:py-20">
        <Container>
          <div className="max-w-3xl mx-auto">
            {/* Category Filter */}
            <div className="mb-8">
              <FAQCategoryFilter
                activeCategory={activeCategory}
                onCategoryChange={setActiveCategory}
              />
            </div>

            {/* FAQ Accordion */}
            <FAQAccordion faqs={filteredFaqs} />
          </div>
        </Container>
      </section>

      {/* CTA Section */}
      <section className="py-16 md:py-20 bg-muted/30">
        <Container>
          <div className="text-center max-w-2xl mx-auto">
            <h2 className="text-3xl md:text-4xl font-bold tracking-tight text-foreground">
              Still Have Questions?
            </h2>
            <p className="mt-4 text-lg text-muted-foreground">
              We&apos;re here to help. Reach out and we&apos;ll get back to you promptly.
            </p>
            <div className="mt-8">
              <Button asChild size="lg">
                <Link href="/contact">Contact Us</Link>
              </Button>
            </div>
          </div>
        </Container>
      </section>
    </main>
  );
}
```

**Note on SEO with Client Components:**
Since this page uses `useState` for filtering, it must be a client component. However, the FAQ content is still rendered in the initial HTML for SEO because:
1. `getFAQPageContent()` reads from static JSON at build time
2. The initial render includes all FAQs (activeCategory defaults to "all")
3. SSR still generates full HTML with all questions visible

For metadata, create a separate `metadata.ts` file or use this pattern:
```typescript
// app/faq/layout.tsx (server component)
import type { Metadata } from "next";

export const metadata: Metadata = {
  title: "FAQ | Marketplace Consultants",
  description:
    "Find answers to common questions about our Amazon and Etsy consulting services, pricing, and how we work with clients.",
  openGraph: {
    title: "FAQ | Marketplace Consultants",
    description:
      "Answers to frequently asked questions about marketplace consulting.",
    type: "website",
  },
};

export default function FAQLayout({
  children,
}: {
  children: React.ReactNode;
}): React.ReactElement {
  return <>{children}</>;
}
```

### Accessibility Requirements
[Source: docs/architecture/coding-standards.md]

- Accordion uses Radix UI which provides:
  - Keyboard navigation (Tab, Enter/Space to toggle)
  - Proper ARIA attributes (aria-expanded, aria-controls)
  - Focus management
- Category filter buttons are keyboard accessible (Tab navigation, Enter/Space to activate)
- Proper focus indicators (built into shadcn/ui components)
- Questions visible in DOM for screen readers

### Existing UI Components to Use
[Source: Current codebase]

1. **Accordion** (`components/ui/accordion.tsx`) - Radix-based accordion (EXISTING)
2. **Button** (`components/ui/button.tsx`) - Filter buttons and CTA
3. **Container** (`components/layout/container.tsx`) - Consistent max-width

## Testing

[Source: docs/architecture/testing-strategy.md]

### Test Locations
- `tests/components/sections/faq-accordion.test.tsx` - FAQAccordion unit tests
- `tests/components/sections/faq-category-filter.test.tsx` - FAQCategoryFilter tests
- `tests/app/faq.test.tsx` - FAQ page integration tests
- `tests/lib/content-faq.test.ts` - Content accessor tests

### Testing Framework
- Vitest + React Testing Library
- Import from `@testing-library/react`
- Use `describe`, `it`, `expect` from `vitest`

### FAQAccordion Test Examples

```typescript
// tests/components/sections/faq-accordion.test.tsx
import { render, screen } from "@testing-library/react";
import userEvent from "@testing-library/user-event";
import { describe, it, expect } from "vitest";
import { FAQAccordion } from "@/components/sections/faq-accordion";

const mockFaqs = [
  { id: "faq-1", category: "general" as const, question: "Question 1?", answer: "Answer 1" },
  { id: "faq-2", category: "amazon" as const, question: "Question 2?", answer: "Answer 2" },
];

describe("FAQAccordion", () => {
  it("renders all FAQ questions", () => {
    render(<FAQAccordion faqs={mockFaqs} />);

    expect(screen.getByText("Question 1?")).toBeInTheDocument();
    expect(screen.getByText("Question 2?")).toBeInTheDocument();
  });

  it("shows answer when accordion item expanded", async () => {
    const user = userEvent.setup();
    render(<FAQAccordion faqs={mockFaqs} />);

    const trigger = screen.getByRole("button", { name: /Question 1/i });
    await user.click(trigger);

    expect(screen.getByText("Answer 1")).toBeVisible();
  });

  it("accordion trigger has correct ARIA attributes", async () => {
    const user = userEvent.setup();
    render(<FAQAccordion faqs={mockFaqs} />);

    const trigger = screen.getByRole("button", { name: /Question 1/i });
    expect(trigger).toHaveAttribute("aria-expanded", "false");

    await user.click(trigger);
    expect(trigger).toHaveAttribute("aria-expanded", "true");
  });

  it("keyboard navigation works", async () => {
    const user = userEvent.setup();
    render(<FAQAccordion faqs={mockFaqs} />);

    const trigger = screen.getByRole("button", { name: /Question 1/i });
    trigger.focus();
    await user.keyboard("{Enter}");

    expect(trigger).toHaveAttribute("data-state", "open");
  });
});
```

### FAQCategoryFilter Test Examples

```typescript
// tests/components/sections/faq-category-filter.test.tsx
import { render, screen } from "@testing-library/react";
import userEvent from "@testing-library/user-event";
import { describe, it, expect, vi } from "vitest";
import { FAQCategoryFilter } from "@/components/sections/faq-category-filter";

describe("FAQCategoryFilter", () => {
  it("renders All button and category buttons", () => {
    render(<FAQCategoryFilter activeCategory="all" onCategoryChange={vi.fn()} />);

    expect(screen.getByRole("button", { name: "All" })).toBeInTheDocument();
    expect(screen.getByRole("button", { name: "General" })).toBeInTheDocument();
    expect(screen.getByRole("button", { name: "Amazon" })).toBeInTheDocument();
    expect(screen.getByRole("button", { name: "Etsy" })).toBeInTheDocument();
    expect(screen.getByRole("button", { name: "Pricing" })).toBeInTheDocument();
  });

  it("active category button has different styling", () => {
    render(<FAQCategoryFilter activeCategory="amazon" onCategoryChange={vi.fn()} />);

    const amazonButton = screen.getByRole("button", { name: "Amazon" });
    const allButton = screen.getByRole("button", { name: "All" });

    // Active button should not have outline variant class
    expect(amazonButton.className).not.toContain("border-input");
    expect(allButton.className).toContain("border-input");
  });

  it("calls onCategoryChange when button clicked", async () => {
    const user = userEvent.setup();
    const handleChange = vi.fn();
    render(<FAQCategoryFilter activeCategory="all" onCategoryChange={handleChange} />);

    await user.click(screen.getByRole("button", { name: "Amazon" }));

    expect(handleChange).toHaveBeenCalledWith("amazon");
  });
});
```

### FAQ Page Test Examples

```typescript
// tests/app/faq.test.tsx
import { render, screen, within } from "@testing-library/react";
import userEvent from "@testing-library/user-event";
import { describe, it, expect, vi } from "vitest";
import FAQPage from "@/app/faq/page";

// Mock content accessor
vi.mock("@/lib/content", () => ({
  getFAQPageContent: () => ({
    hero: {
      headline: "Frequently Asked Questions",
      subheadline: "Find answers to common questions.",
    },
    faqs: [
      { id: "faq-1", category: "general", question: "General Q?", answer: "General A" },
      { id: "faq-2", category: "amazon", question: "Amazon Q?", answer: "Amazon A" },
      { id: "faq-3", category: "pricing", question: "Pricing Q?", answer: "Pricing A" },
    ],
  }),
}));

describe("FAQPage", () => {
  it("renders page headline", () => {
    render(<FAQPage />);
    expect(screen.getByRole("heading", { level: 1 })).toHaveTextContent("Frequently Asked Questions");
  });

  it("renders FAQ accordion", () => {
    render(<FAQPage />);
    expect(screen.getByText("General Q?")).toBeInTheDocument();
    expect(screen.getByText("Amazon Q?")).toBeInTheDocument();
    expect(screen.getByText("Pricing Q?")).toBeInTheDocument();
  });

  it("renders category filter", () => {
    render(<FAQPage />);
    expect(screen.getByRole("button", { name: "All" })).toBeInTheDocument();
    expect(screen.getByRole("button", { name: "Amazon" })).toBeInTheDocument();
  });

  it("renders contact CTA at bottom", () => {
    render(<FAQPage />);
    expect(screen.getByRole("heading", { name: /Still Have Questions/i })).toBeInTheDocument();
    expect(screen.getByRole("link", { name: /Contact Us/i })).toHaveAttribute("href", "/contact");
  });

  it("filtering by category shows only matching FAQs", async () => {
    const user = userEvent.setup();
    render(<FAQPage />);

    // Initially all FAQs visible
    expect(screen.getByText("General Q?")).toBeInTheDocument();
    expect(screen.getByText("Amazon Q?")).toBeInTheDocument();
    expect(screen.getByText("Pricing Q?")).toBeInTheDocument();

    // Click Amazon filter
    await user.click(screen.getByRole("button", { name: "Amazon" }));

    // Only Amazon FAQ visible
    expect(screen.queryByText("General Q?")).not.toBeInTheDocument();
    expect(screen.getByText("Amazon Q?")).toBeInTheDocument();
    expect(screen.queryByText("Pricing Q?")).not.toBeInTheDocument();
  });
});
```

### Content Accessor Test Examples

```typescript
// tests/lib/content-faq.test.ts
import { describe, it, expect } from "vitest";
import { getFAQs, getFAQsByCategory, getFAQPageContent } from "@/lib/content";

describe("FAQ Content Accessors", () => {
  it("getFAQs returns all FAQs", () => {
    const faqs = getFAQs();
    expect(Array.isArray(faqs)).toBe(true);
    expect(faqs.length).toBeGreaterThanOrEqual(8);
  });

  it("getFAQsByCategory returns filtered FAQs", () => {
    const pricingFaqs = getFAQsByCategory("pricing");
    expect(Array.isArray(pricingFaqs)).toBe(true);
    pricingFaqs.forEach((faq) => {
      expect(faq.category).toBe("pricing");
    });
  });

  it("getFAQPageContent returns hero content", () => {
    const content = getFAQPageContent();
    expect(content.hero).toBeDefined();
    expect(content.hero.headline).toBeDefined();
    expect(content.hero.subheadline).toBeDefined();
    expect(Array.isArray(content.faqs)).toBe(true);
  });
});
```

### Test Coverage Goals
- FAQAccordion renders questions, expands/collapses, keyboard accessible
- FAQCategoryFilter renders all buttons, indicates active state, calls handler
- FAQ page renders all sections, filters work correctly
- Content accessors return correct data shapes

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-06 | 1.0 | Initial story draft | SM Agent (Bob) |

---

## Dev Agent Record

### Agent Model Used
Claude Opus 4.5 (claude-opus-4-5-20251101)

### Debug Log References
None - no blocking issues encountered.

### Completion Notes List
- All 8 tasks completed successfully
- Created 10 FAQ items organized by 4 categories (general, amazon, etsy, pricing)
- FAQAccordion component uses Radix UI for built-in accessibility
- FAQCategoryFilter component provides filtering with active state styling
- FAQ page is a client component for interactivity, with metadata in layout.tsx for SEO
- 333 tests passing (26 new tests added for FAQ functionality)
- Lint and build pass cleanly
- Manual verification pending user testing

### File List
**New Files:**
- content/faq.json
- components/sections/faq-accordion.tsx
- components/sections/faq-category-filter.tsx
- app/faq/layout.tsx
- app/faq/page.tsx
- tests/components/sections/faq-accordion.test.tsx
- tests/components/sections/faq-category-filter.test.tsx
- tests/app/faq.test.tsx
- tests/lib/content-faq.test.ts

**Modified Files:**
- lib/types.ts (added FAQCategory, FAQ, FAQPageContent types)
- lib/content.ts (added getFAQs, getFAQsByCategory, getFAQPageContent functions)

---

## QA Results

### Review Date: 2025-12-06

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

**Overall: Excellent implementation.** The FAQ page feature is well-architected with clean separation of concerns, proper TypeScript typing, comprehensive JSDoc documentation, and thorough test coverage. The implementation follows all established project patterns and coding standards.

**Key Strengths:**
- Clean component architecture with reusable FAQAccordion and FAQCategoryFilter components
- Proper use of Radix UI Accordion for built-in accessibility (keyboard navigation, ARIA attributes)
- Content accessor pattern properly followed (no direct JSON imports in components)
- Excellent test coverage (26 tests across 4 test files) covering rendering, filtering, accessibility, and edge cases
- Proper SEO handling via layout.tsx for metadata with client component page
- Consistent styling with existing project patterns

### Refactoring Performed

None required. The code quality is high and no refactoring was necessary.

### Compliance Check

- Coding Standards: ✓ All standards met (typed props, JSDoc documentation, content accessors, no console.logs)
- Project Structure: ✓ Files in correct locations per unified-project-structure.md
- Testing Strategy: ✓ Unit tests for components, content accessor tests, page integration tests
- All ACs Met: ✓ All 7 acceptance criteria fully implemented

### Acceptance Criteria Validation

| AC | Description | Status | Evidence |
|----|-------------|--------|----------|
| 1 | Page headline | ✓ | Hero section with headline from content |
| 2 | 5-10 FAQ items | ✓ | 10 FAQ items in content/faq.json |
| 3 | Accordion component | ✓ | FAQAccordion using Radix UI Accordion |
| 4 | Categories | ✓ | 4 categories (general, amazon, etsy, pricing) with filter |
| 5 | CTA at bottom | ✓ | "Still Have Questions?" section with Contact Us button |
| 6 | Accessible accordion | ✓ | Radix UI provides keyboard nav + ARIA; tests verify |
| 7 | SEO-friendly | ✓ | Questions rendered server-side, metadata in layout.tsx |

### Improvements Checklist

All items addressed by developer - no outstanding issues:

- [x] Type definitions added to lib/types.ts with JSDoc
- [x] Content accessor functions added to lib/content.ts with JSDoc
- [x] Components have proper TypeScript interfaces and JSDoc
- [x] All 333 tests passing
- [x] Lint clean (no ESLint warnings or errors)
- [x] Build successful

### Security Review

No security concerns. This feature:
- Contains no user input or form handling
- Has no API calls or external data fetching
- Uses only static content from JSON files
- Does not handle authentication or sensitive data

### Performance Considerations

No performance concerns:
- Static content loaded at build time
- Client-side filtering is efficient (simple array filter)
- Bundle size impact is minimal (4.24 kB for FAQ page)
- No additional API calls or data fetching

### Files Modified During Review

None - no modifications needed.

### Gate Status

Gate: **PASS** → [docs/qa/gates/3.6-faq-page.yml](docs/qa/gates/3.6-faq-page.yml)

### Test Coverage Summary

| Test File | Tests | Coverage |
|-----------|-------|----------|
| faq-accordion.test.tsx | 5 | Renders, expand/collapse, ARIA, keyboard nav, empty state |
| faq-category-filter.test.tsx | 5 | Renders all buttons, active styling, click handlers |
| faq.test.tsx | 8 | Page sections, filtering behavior |
| content-faq.test.ts | 9 | All content accessor functions and data structure |

**Total: 27 tests for FAQ functionality**

### Requirements Traceability

| Requirement | Test Cases |
|-------------|------------|
| AC1: Page headline | `FAQPage renders page headline` |
| AC2: FAQ items | `FAQPage renders FAQ accordion`, `getFAQs returns all FAQs` |
| AC3: Accordion | `FAQAccordion shows answer when expanded`, `accordion trigger has ARIA attributes` |
| AC4: Categories | `FAQCategoryFilter renders all buttons`, `filtering by category shows only matching FAQs` |
| AC5: CTA | `FAQPage renders contact CTA at bottom` |
| AC6: Accessibility | `keyboard navigation works`, `accordion trigger has correct ARIA attributes` |
| AC7: SEO | SSR verified via build (static generation) |

### Recommended Status

✓ **Ready for Done** - All acceptance criteria met, tests passing, build clean, no issues identified.
